var isWebTrendsInitialized = false;var isWebTrendsImageOverrided = false;var _tr_commerce_webTrends_tag ;if (!isWebTrendsInitialized  && typeof(WebTrends) != 'undefined' && (WebTrends != null)){WebTrends.prototype.dcsCreateImage=function(dcsSrc){  if (document.images){    this.images[this.index]=new Image();    this.images[this.index].onload = trWebTrendCallBack;    this.images[this.index].src=dcsSrc;    this.index++;  }  else{    document.write('');  }}isWebTrendsImageOverrided = true;_tr_commerce_webTrends_tag = new WebTrends();_tr_commerce_webTrends_tag.dcsGetId();isWebTrendsInitialized = true;}trWebTrendCallBack = function(){} var registeredCookieValue =  YAHOO.util.Cookie.get("ruus");if(registeredCookieValue != null && registeredCookieValue != 'undefined'){document.write('');}var isWebTrendsSrcTrtExists = false; var _tr_commerce_webtrends_source = '';var _tr_commerce_webtrends_target = '';var _tr_defaultSite = "US_SITE";function createMetaEle(name,content,id){    meta = document.createElement('meta');meta.name = name;meta.content = content;if (id == null || id == ''){meta.id = '_tr_webTrends_WT_z_li';} else {meta.id = id;}document.getElementsByTagName('head')[0].appendChild(meta);} var _tr_sourcePatternList = '${1},[a-zA-z0-9.%:/&]+&regsrc=([a-zA-z0-9_]{1,30});; US_ARTICLE,http://www\.reuters\.com/article/;;US_Finance,http://www\.reuters\.com/finance/;;US_Search,http://www\.reuters\.com/search/;;US_Pictures,http://www\.reuters\.com/pictures/;;US_Video,http://www\.reuters\.com/video/;;US_Places,http://www\.reuters\.com/places/;;US_News,http://www\.reuters\.com/news/;;US_Summit,http://www\.reuters\.com/submmit/;;US_Sectors,http://www\.reuters\.com/sectors/;;US_SITE,http://www\.reuters\.com/([^\?#]+);;US_HOME,http://www\.reuters\.com;; US_PORTFOLIO,http://portfolio\.us\.;; US_NEWSLETTER,https://commerce\.us\.reuters\.com/([a-zA-Z0-9/]+)/newsletter/;; US_BLOGS,http://blogs\.reuters\.com/;; US_RESEARCH_REPORTS,https://commerce\.us\.reuters\.com/purchase/;; US_FUNDS,http://funds\.us\.reuters\.com/;; US_ALERTS,http://alerts\.us\.reuters\.com/;;  US_test_js,http://test.com'; var _tr_targetPatternList = 'US_ARTICLE,http://www\.reuters\.com/article/;;US_Finance,http://www\.reuters\.com/finance/;;US_Search,http://www\.reuters\.com/search/;;US_Pictures,http://www\.reuters\.com/pictures/;;US_Video,http://www\.reuters\.com/video/;;US_Places,http://www\.reuters\.com/places/;;US_News,http://www\.reuters\.com/news/;;US_Summit,http://www\.reuters\.com/submmit/;;US_Sectors,http://www\.reuters\.com/sectors/;;US_SITE,http://www\.reuters\.com/([^\?#]+);;US_HOME,http://www\.reuters\.com;; US_PORTFOLIO,http://portfolio\.us\.;; US_NEWSLETTER,https://commerce\.us\.reuters\.com/([a-zA-Z0-9/]+)/newsletter/;; US_BLOGS,http://blogs\.reuters\.com/;; US_RESEARCH_REPORTS,https://commerce\.us\.reuters\.com/purchase/;; US_FUNDS,http://funds\.us\.reuters\.com/;; US_ALERTS,http://alerts\.us\.reuters\.com/;;';_tr_defaultSite = 'US_UNKNOWN';function getSrcTagUrl(goUrl, patternString){patternTestArray = patternString.split(";;");goUrl = decodeURIComponent(goUrl);patternArylength = patternTestArray.length;for(i=0;i';document.write(trOverlayResources); trOverlaySizeCss = '';document.write(trOverlaySizeCss); document.write('' + '');document.write('' + '');document.write('' + '');var _tr_commerce_loginCallbackObj;var _tr_commerce_regBackUrl;var _tr_commerce_overlay_div_id;var _tr_commerce_commerceHost = 'commerce.us.reuters.com';var _tr_commerce_partner;var _tr_commerce_displayStyle = "";// define overlay css styles var trOverlayResources="";//define variables for gigya loginvar _tr_gigyaUID;var _tr_gigyaSignature;var _tr_gigyaTimestamp;var _tr_gigyaUserInfo;var _tr_gigyaUserInfoQueryString='';var _tr_gigyaLoggedin;var _tr_gigyaLoginProvider = 'Social';var _tr_gigyaProviders = new Array();var _tr_gigyaEmail;var _tr_targetURL;var _tr_gigya_login = false;var _tr_gigya_notifyLogin = false;var _tr_gigya_opt_to_new_account_flag = false;var _tr_email_from_FH = null;var _tr_gigya_loginHandler_registered = false;var conf = {    APIKey:'2_5UlTf5KVL1qEVXO0ZoNYPoxhzCHYvubplalCtItzf8EuG3Tn6WKHR0hVysesYMdj',    "enabledProviders": 'google,yahoo,facebook,linkedin,myspace,twitter,aol', "disabledProviders": 'wordpress, blogger, hyves, livejournal, verisign, typepad',        signIDs:"true"};var _tr_gigya_timer_id;var _tr_gigya_time_out_value = 10 * 1000;// default gigya timeout:10 seconds _tr_gigya_time_out_value = parseInt('10') * 1000; function trSetTimeOut(functionName){_tr_gigya_timer_id = window.setTimeout(functionName,_tr_gigya_time_out_value);}function trClearTimeOut(){if(_tr_gigya_timer_id != null && _tr_gigya_timer_id != 'undefined'){window.clearTimeout(_tr_gigya_timer_id);}}var context = {    msg:'This is my params.context.msg'};var loginUIParams ={    "showTermsLink":false,     "showGigyaLink":false,    "height":60,     "width":275,     "containerID":"gigyalogin",    "UIConfig":""};//overlay login headerfunction loginHeader(){var headVarArray = new Array();headVarArray.push('');headVarArray.push('  ');if('rcom' != _tr_commerce_partner){headVarArray.push('');headVarArray.push('  ');headVarArray.push('  ');headVarArray.push('  ');headVarArray.push('');}return headVarArray.join('');}//overlay login footerfunction loginFooter(){var footVarArray = new Array();footVarArray.push('');footVarArray.push('  ');footVarArray.push('  ');return footVarArray.join('');}//functionsfunction doAjajOperation(url){    var script = document.createElement("SCRIPT");    script.src = url;    script.type="text/javascript";    overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    overlayDiv.appendChild(script);    }function loginUser(overlayDivId, regBackURL, callbackObj,partner){    //overlayDivId: The login popup div id.    //regBackURL: Normally should be the current page's URL, when user clicks on the 'register' link in the overlay, he/she will be bring to the registration page and we would want to bring him/her back when register succeeded. If this parameter is left null, the window.location will be picked up.    //callbackObj: The callback object instance.    //partner: to present different page for different partner    _tr_commerce_loginCallbackObj = callbackObj;    _tr_commerce_regBackUrl = regBackURL;    _tr_commerce_overlay_div_id = overlayDivId;    _tr_commerce_partner = partner; // Register Socialize event handlers if(typeof gigya != 'undefined' && typeof gigya.services.socialize.addEventHandlers != 'undefined' && _tr_gigya_loginHandler_registered != true){ gigya.services.socialize.addEventHandlers(conf, {   onLogin: onGigyaLoginHandler } ); _tr_gigya_loginHandler_registered = true; } if(_tr_commerce_partner!='rcom'){ var cssUrl = 'https://commerce.us.reuters.com/resources_v2/css/rcom-commerce.css'; var cssNode = document.createElement("link"); cssNode.setAttribute('rel', 'stylesheet');cssNode.setAttribute('href', cssUrl); document.body.appendChild(cssNode); }     var registeredCookieValue =  YAHOO.util.Cookie.get("ruus");    // if not exist persistent cookie (ruus), show login page; else show registration page    if(registeredCookieValue != null && registeredCookieValue != 'undefined'){    presentLoginFragment();    } else {    presentRegFragment();    }createMetaEle("WT.z_li","0","_tr_webTrends_WT_z_li");    // fire web trends request//    if (!isWebTrendsInitialized  && typeof(WebTrends) != 'undefined' && (WebTrends != null)){if (_tr_commerce_webTrends_tag == null &&  typeof(WebTrends) != 'undefined'){    _tr_commerce_webTrends_tag = new WebTrends();//_tr_commerce_webTrends_tag.dcsGetId();isWebTrendsInitialized = true;    }        if(isWebTrendsSrcTrtExists == null || isWebTrendsSrcTrtExists == false){           var goPara = regBackURL == null || regBackURL == '' ? top.location.href : regBackURL ;           if(typeof(_tr_sourcePatternList) == 'undefined' || _tr_sourcePatternList == null || _tr_sourcePatternList == ''){                   _tr_commerce_webtrends_source = _tr_defaultSite;           }else{                   _tr_commerce_webtrends_source = getSrcTagUrl(goPara,_tr_sourcePatternList);           }           if(typeof(_tr_targetPatternList) == 'undefined' || _tr_targetPatternList == null || _tr_targetPatternList == ''){               _tr_targetPatternList = _tr_sourcePatternList;           }           if(typeof(_tr_targetPatternList) == 'undefined' ||  _tr_targetPatternList == null || _tr_targetPatternList == ''){                   _tr_commerce_webtrends_target = _tr_defaultSite;           }else{                   _tr_commerce_webtrends_target = getSrcTagUrl(goPara,_tr_targetPatternList);           }           createMetaEle("WT.z_li_src",_tr_commerce_webtrends_source,null);           createMetaEle("WT.z_li_trg",_tr_commerce_webtrends_target,null);       }       if (_tr_commerce_webTrends_tag != null){       _tr_commerce_webTrends_tag.dcsCollect();   dscQuantcast(_tr_commerce_webTrends_tag);   }}function handlePostLogin(){   if('fullpage' != _tr_commerce_displayStyle){   _tr_commerce_loginCallbackObj.postLogin();}else{location.href=_tr_targetURL;}}function updateScreenName(overlayDivId, callbackObj,partner){    //overlayDivId: The login popup div id.    //callbackObj: The callback object instance.    //partner: to present different page for different partner    _tr_commerce_loginCallbackObj = callbackObj;    _tr_commerce_overlay_div_id = overlayDivId;    _tr_commerce_partner = partner;    if(_tr_commerce_partner!='rcom'){ var cssUrl = 'https://commerce.us.reuters.com/resources_v2/css/rcom-commerce.css'; var cssNode = document.createElement("link"); cssNode.setAttribute('rel', 'stylesheet');cssNode.setAttribute('href', cssUrl); document.body.appendChild(cssNode);}     presentNoScreenNameFragment();}function presentLoginFragment(){    overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);        //constructNormalPage();    //overlayDiv.innerHTML = strNormalLoginVar;    loginTitle = constructLoginTitle();      strNormalLoginPageVar = loginHeader() + loginTitle + constructLogin() + contructGigyaLogin("loginOverlay") + constructSwitchPrompt("loginOverlay") + loginFooter();    overlayDiv.innerHTML = strNormalLoginPageVar;    if (typeof gigya != 'undefined' && typeof gigya.services.socialize.showLoginUI != 'undefined'){    gigya.services.socialize.showLoginUI(conf,loginUIParams);    }    return;}function presentRegFragment(){    overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);        //constructNormalPage();    //overlayDiv.innerHTML = strNormalLoginVar;      strNormalLoginPageVar = loginHeader() + constructRegTitle() + constructRegEntry() + contructGigyaLogin("regOverlay")+ constructSwitchPrompt("regOverlay") + loginFooter();    overlayDiv.innerHTML = strNormalLoginPageVar;    if (typeof gigya != 'undefined' && typeof gigya.services.socialize.showLoginUI != 'undefined'){    gigya.services.socialize.showLoginUI(conf,loginUIParams);    }    return;}function presentNoScreenNameFragment(status, message){    overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    var strNoScreenNameVar = loginHeader() + constructNoScreenName(status, message) + loginFooter();    overlayDiv.innerHTML = strNoScreenNameVar;    return;}function presentLinkAccountSuccess(status, message){    overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    var strLinkAccountSuccessVar = constructLinkAccountSuccess(status, message);    overlayDiv.innerHTML = strLinkAccountSuccessVar;    return;}function presentEmailExistsFragment(){    overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    var strPostGigyaLoginVar = loginHeader() + contructPostGigyaLogin(true) + loginFooter();    overlayDiv.innerHTML = strPostGigyaLoginVar;    return;}function presentEmailNonExistsFragment(overlayDivId,partner){    overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    var strGigyaRegVar =  loginHeader() + contructGigyaReg() + loginFooter();     overlayDiv.innerHTML = strGigyaRegVar;    return;}function presentEmailVerificationFragment(){overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    strGigyaRegVar =  loginHeader() + contructRegEmailVerification() + loginFooter();     overlayDiv.innerHTML = strGigyaRegVar;    return;}function presentForgetPasswordEmailVerificationFragment(userMail){overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    strGigyaRegVar =  loginHeader() + contructForgotPasswordEmailVerification(userMail) + loginFooter();     overlayDiv.innerHTML = strGigyaRegVar;    return;}function presentNotifyVerifyEmail(userMail){overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    strGigyaRegVar =  loginHeader() + contructNotifyVerifyEmail(userMail) + loginFooter();     overlayDiv.innerHTML = strGigyaRegVar;    return;}function presentNotifyVerifyEmailSent(userEmail){overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    strGigyaRegVar =  loginHeader() + contructNotifyVerifyEmailSent(userEmail) + loginFooter();     overlayDiv.innerHTML = strGigyaRegVar;    return;}function presentRegEmailSentFragment(){overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    strGigyaRegVar =  contructRegEmailSent();     overlayDiv.innerHTML = strGigyaRegVar;    return;}function presentLinkAccountSuccessFragment(){overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    strGigyaRegVar =  loginHeader() + contructLinkAccountSuccess() + loginFooter();     overlayDiv.innerHTML = strGigyaRegVar;    return;}function trOverlayCancelLogin(){    _tr_commerce_loginCallbackObj.cancelLogin();}function setTrOverlayMsg(divId,message){    headLineDiv = document.getElementById(divId);    if(headLineDiv != null){        headLineDiv.innerHTML = message;        headLineDiv.className  = "label error";    }}function enableDisplay(elementId){element = document.getElementById(elementId);if( element != null && element != ''){element.style.display='';}}function disableDisplay(elementId){element = document.getElementById(elementId);if( element != null && element != ''){element.style.display='none';}}function trOverlayGoRestorePassword(){    overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);        strNormalLoginPageVar = loginHeader() + constructForgetPassword() + loginFooter();        overlayDiv.innerHTML = strNormalLoginPageVar;    return;}function trOverlayGoReg(){overlayDiv = document.getElementById(_tr_commerce_overlay_div_id);    strGigyaRegVar =  loginHeader() + constructRegistrtion() + loginFooter();     overlayDiv.innerHTML = strGigyaRegVar;    showRecaptcha(); }function isSignin() {  var loggedIn = false;  var domain = 0; if((_tr_commerce_commerceHost.indexOf(".us.") > -1) || (_tr_commerce_commerceHost.indexOf("www.") > -1)){        domain=1;  }else if(_tr_commerce_commerceHost.indexOf(".uk.") > -1){        domain=2; }else if(_tr_commerce_commerceHost.indexOf(".jp.") > -1){        domain=4;  }else if(_tr_commerce_commerceHost.indexOf(".in.") > -1){        domain=9;  }else if(_tr_commerce_commerceHost.indexOf(".cn.") > -1){        domain=10;}  var edition = YAHOO.util.Cookie.get('edition');  var customerId = YAHOO.util.Cookie.get('customerId');  if((null == edition) || ("" == edition)){        //This is here to support the time before the edition cookie exists        loggedIn = ((customerId != null) && (customerId != "@"));  }else{        loggedIn = ((customerId != null) && (customerId != "@") && (domain == edition));  }  return loggedIn;  }function getCookie(NameOfCookie){ if (document.cookie.length > 0){    begin = document.cookie.indexOf(NameOfCookie+"=");if (begin != -1){begin += NameOfCookie.length+1;end = document.cookie.indexOf(";", begin);if (end == -1) end = document.cookie.length;return unescape(document.cookie.substring(begin, end)); }}return null;}function commonPopup(url, width, height, toolsInd, wname){var options = "width=" + width + ",height=" + height + ",top=" + ((screen.height - height) / 4).toString() + ",left=" + ((screen.width - width) / 2).toString();switch (toolsInd){case 1:options += ",toolbar=no,status=no,resizable=no,scrollbars=yes";break;case 2:options += ",menubar=yes,toolbar=yes,status=yes,resizable=yes,location=yes,scrollbars=yes";break;default://do nothingbreak;}if (!wname){wname = "reutersPopup";}popupWindow = window.open(url, wname, options);if (popupWindow){popupWindow.focus();}}function transformFormToQuery(aForm){var str = '';var elem = aForm.elements;for(var i = 0; i @,;:'\\\\\\\"\\.\\[\\]";    var validChars = "\[^\\s" + specialChars + "\]";    var quotedUser = "(\"[^\"]*\")";    var ipDomainPat = /^(\d{1,3})[.](\d{1,3})[.](\d{1,3})[.](\d{1,3})$/;    var atom = validChars + '+';    var word = "(" + atom + "|" + quotedUser + ")";    var userPat = new RegExp("^" + word + "(\\." + word + ")*$");    var domainPat = new RegExp("^" + atom + "(\\." + atom + ")*$");    var matchArray = emailStr.match(emailPat);    if (matchArray == null) {        return false;    }var user = matchArray[1];    var domain = matchArray[2];    if (user.match(userPat) == null) {        return false;    }    var IPArray = domain.match(ipDomainPat);    if (IPArray != null) {        for (var i = 1; i  255) {                return false;            }        }        return true;    }    var domainArray = domain.match(domainPat);    if (domainArray == null) {        return false;    }    var atomPat = new RegExp(atom, "g");    var domArr = domain.match(atomPat);    var len = domArr.length;    if ((domArr[domArr.length - 1].length  3)) {        return false;    }    if (len ');            loginTitleVarArray.push('Sign in');    loginTitleVarArray.push("");       return loginTitleVarArray.join('');     }function constructLogin(){    loginVarArray = new Array();    loginVarArray.push('');loginVarArray.push('');loginVarArray.push('Enter your Reuters.com account info');loginVarArray.push('');loginVarArray.push('');loginVarArray.push('');loginVarArray.push('  ');loginVarArray.push('  ');loginVarArray.push('  ');loginVarArray.push('  ');loginVarArray.push('  ');loginVarArray.push('  ');loginVarArray.push('  ');loginVarArray.push('  ');loginVarArray.push('  Email');loginVarArray.push('  ');loginVarArray.push('  Password');loginVarArray.push('  ');loginVarArray.push('  ');loginVarArray.push('    ');loginVarArray.push('    ');loginVarArray.push('    Remember me on this computer');loginVarArray.push('  ');loginVarArray.push('  ');    loginVarArray.push('  Forgot your password?');loginVarArray.push('');loginVarArray.push('');return loginVarArray.join('');}function validateLoginForm(loginForm){ if(loginForm != null){ user = loginForm.elements['loginName'].value; if(user == null || user==''){ alert('Email is required!'); loginForm.elements['loginName'].focus(); return false; } password = loginForm.elements['password'].value; if(password == null || password==''){ alert('Password is required'); loginForm.elements['password'].focus(); return false; } var loginNameEle = document.forms['loginForm'].elements['loginName'].value; if(loginNameEle != ""){ if(document.getElementById('notMe')!=null){ document.getElementById('notMe').style.display='none'; } if(document.getElementById('h2LoginHeader')!=null){    document.getElementById('h2LoginHeader').innerHTML='Sign in';    }   } queryString = transformFormToQuery(loginForm); url = "https://" + _tr_commerce_commerceHost + "/login/pages/login/login.do?"+queryString;doAjajOperation(url); }}function clearEmailAddressAndPassword() {    var loginNameEle = document.forms['loginForm'].elements['loginName'];    loginNameEle.value = '';    loginNameEle.focus();    var passwordEle = document.forms['loginForm'].elements['password'];    passwordEle.value = '';    if(document.getElementById('notMe')!=null){    document.getElementById('notMe').style.display='none';    }    if(document.getElementById('h2LoginHeader')!=null){    document.getElementById('h2LoginHeader').innerHTML='Sign in';    }    headerSpan = document.getElementById('trOverlayLoginHeadline');    headerSpan.innerHTML="";  }function constructRegTitle(){    regTitleVarArray = new Array();    regTitleVarArray.push('');    regTitleVarArray.push('  Register for a Reuters.com Account');        regTitleVarArray.push('');    return regTitleVarArray.join('');}function constructRegEntry(){    regEntryVarArray = new Array();    regEntryVarArray.push('');regEntryVarArray.push('  ');regEntryVarArray.push('Create a new Reuters.com account:');regEntryVarArray.push('  ');regEntryVarArray.push('  ');regEntryVarArray.push('    ');    regEntryVarArray.push('      ');regEntryVarArray.push('        ');regEntryVarArray.push('      ');regEntryVarArray.push('    ');regEntryVarArray.push('  ');regEntryVarArray.push('');return regEntryVarArray.join('');}function contructGigyaLogin(overlayType){var tmpArray = new Array();    tmpArray.push('');    tmpArray.push('        ');tmpArray.push('            ');   tmpArray.push('or ');if(overlayType == "loginOverlay") {tmpArray.push('Sign in using a partner site...');} else if(overlayType == "regOverlay") {tmpArray.push('Register through a partner site:');}tmpArray.push('           ');tmpArray.push('            ');tmpArray.push('');tmpArray.push('  ');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('                 ');tmpArray.push('');tmpArray.push('       ');tmpArray.push('    ');return tmpArray.join('');}function constructSwitchPrompt(overlayType){    tmpArray = new Array();    tmpArray.push('');    if(overlayType == "loginOverlay") {        tmpArray.push('            New to Reuters.com? Register here.');    } else if(overlayType == "regOverlay") {        tmpArray.push('            Already registered? Sign in here.');    }    tmpArray.push('');    return tmpArray.join('');}// onLogin Handler function onGigyaLoginHandler(eventObj) {       if (_tr_gigya_notifyLogin){  return;  } _tr_gigyaUserInfo = eventObj.user; _tr_gigyaUID = _tr_gigyaUserInfo.UID; _tr_gigyaSignature = _tr_gigyaUserInfo.UIDSig; _tr_gigyaTimestamp = _tr_gigyaUserInfo.timestamp; _tr_gigyaEmail = _tr_gigyaUserInfo.email; if(_tr_gigyaUserInfo.loginProvider != null && _tr_gigyaUserInfo.loginProvider !=''){_tr_gigyaLoginProvider = _tr_gigyaUserInfo.loginProvider;_tr_gigyaProviders = _tr_gigyaUserInfo.providers;}  //ignore request if we are already logged in  if (_tr_gigyaLoggedin)    return;  // ignore if either is empty  if (_tr_gigyaUID != null && _tr_gigyaUID!='' ) {    gigyaParams = 'uid='+encodeURIComponent(_tr_gigyaUID) + '&signature='+encodeURIComponent(_tr_gigyaSignature) +     '&timestamp='+encodeURIComponent(_tr_gigyaTimestamp) + '&email='+encodeURIComponent(_tr_gigyaUserInfo.email)+        '&providers='+encodeURIComponent(_tr_gigyaProviders.join(','))+'&loginProvider='+encodeURIComponent(_tr_gigyaLoginProvider);    var socialFields = "firstName,lastName,birthDay,birthMonth,birthYear,gender,city,state,country,photoURL,thumbnailURL,interests,activities,profileURL,likes,languages,address,phones,education,honors,publications,patents,certifications,professionalHeadline,bio,industry,specialties,work,skills,religion,politicalView,interestedIn,relationshipStatus,hometown,favorites,username,locale,socialemail,nickname".split(",");    if(socialFields!=''){    var fieldname;    for(index = 0;index ');//if (emailAlreadyExists) {//} else {//}tmpArray.push('Link Your Accounts');tmpArray.push('We see that you\'ve signed in Reuters.com before. Link your accounts by entering the email address and password associated to your Reuters account.');tmpArray.push('Fields marked with an asterisk(*) are required.');            tmpArray.push('');  tmpArray.push('    '); tmpArray.push('');              tmpArray.push(' '); tmpArray.push(''); tmpArray.push('');tmpArray.push(''); tmpArray.push('');tmpArray.push('');tmpArray.push('    ');tmpArray.push('    Email');tmpArray.push('     *');tmpArray.push('    ');            tmpArray.push('    ');   if (_tr_email_from_FH != null && _tr_email_from_FH != ''){        tmpArray.push('         ');    }else if(_tr_gigyaEmail != null && _tr_gigyaEmail != ''){tmpArray.push('    ');}else {tmpArray.push('    ');}         tmpArray.push('    This isn\'t me');    tmpArray.push('    ');            tmpArray.push('    ');tmpArray.push('Password');tmpArray.push('*');tmpArray.push('');            tmpArray.push('    ');                tmpArray.push('     ');tmpArray.push('       Choose password?');     tmpArray.push('    ');tmpArray.push('    ');            tmpArray.push('   ');                tmpArray.push('      ');                    tmpArray.push('      ');   tmpArray.push('      Remember me');            tmpArray.push('   ');            tmpArray.push('    ');                tmpArray.push('      ');tmpArray.push('        ');tmpArray.push('      ');            tmpArray.push('    ');            tmpArray.push('');            tmpArray.push('            ');    tmpArray.push('    ');                    tmpArray.push('Don\'t want to link your account? ');          tmpArray.push(' Click here ');    tmpArray.push('to register a new Reuters account automatically with the email address provided. ');           tmpArray.push('    ');tmpArray.push('');return tmpArray.join('');}function jsGigyaLoginSubmit(formEle){loginName = formEle.elements["loginName"].value;password = formEle.elements["password"].value;back = formEle.elements["backUrl"].value;backParameterEncoded = formEle.elements["backParameterEncoded"].value;source = formEle.elements["source"].value;if(loginName == null ||loginName == ""){alert('Email is required!');promptLoginFormAsterisk();formEle.elements["loginName"].focus();return false;}if(password==null||password ==""){alert('Password is required');promptLoginFormAsterisk();formEle.elements["password"].focus();return false;} //flag = formEle.elements["flag"].value;gigyaParams = 'uid='+encodeURIComponent(_tr_gigyaUID) + '&signature='+encodeURIComponent(_tr_gigyaSignature) +     '&timestamp='+encodeURIComponent(_tr_gigyaTimestamp);    gigyaParams += _tr_gigyaUserInfoQueryString;queryString = transformFormToQuery(formEle);url = 'https://' + _tr_commerce_commerceHost + '/commerce/login/postGigyaLogin?' + gigyaParams + '&' + queryString;   doAjajOperation(url);   }function promptLoginFormAsterisk(){ enableDisplay('loginFormRequiredPrompt'); enableDisplay('loginFormEmailAsterisk'); enableDisplay('loginFormPasswordAsterisk');}function trOverlayNotMe(){formEle = document.forms['loginForm'];formEle.elements["loginName"].value = '';formEle.elements["loginName"].focus();}function trOverlayNewAccount(){_tr_gigya_opt_to_new_account_flag = true;presentEmailNonExistsFragment(_tr_commerce_overlay_div_id,_tr_commerce_partner);}function contructGigyaReg(){var tmpArray = new Array(); tmpArray.push('');tmpArray.push('Almost There!');tmpArray.push('');tmpArray.push('    '); tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('    ');tmpArray.push('');tmpArray.push('');tmpArray.push('In order to sign in you with your ' + _tr_gigyaLoginProvider +' account, we need some additional information.');       tmpArray.push('        '); tmpArray.push('');tmpArray.push('            ');tmpArray.push('       Email Address');tmpArray.push('          *');      tmpArray.push('       ');            tmpArray.push('      '); if(_tr_gigyaEmail != null && _tr_gigyaEmail != '' && _tr_gigya_opt_to_new_account_flag == false){tmpArray.push('           ');} else {  tmpArray.push('              ');}tmpArray.push('         Your email address will not be shown anywhere on Reuters.com'); tmpArray.push('       ');            tmpArray.push('            ');tmpArray.push('       Screen Name');tmpArray.push('          *');      tmpArray.push('       ');            tmpArray.push('      '); tmpArray.push('');tmpArray.push('         Your screen name will be displayed next to comments');tmpArray.push('       ');            tmpArray.push('            ');tmpArray.push('       ');                   tmpArray.push('         ');                    tmpArray.push('        I agree with theTerms & Conditions'); tmpArray.push('        *');tmpArray.push('        ');         tmpArray.push('');   tmpArray.push('     ');                tmpArray.push('         ');                    tmpArray.push('           ');                tmpArray.push('         ');            tmpArray.push('     '); tmpArray.push('  ');tmpArray.push('');return tmpArray.join('');}function jsGigyaRegSubmit(regForm){var ele = regForm.elements["EMAILADDRESS"];if (ele){if(ele.value.trim() == '') {  setTrOverlayMsg('regFormEmailError','Email is required!');  regForm.elements["EMAILADDRESS"].focus();  return false;}else{setTrOverlayMsg('regFormEmailError','');}}ele = regForm.elements["SCREENNAME"];  if (ele){if(ele.value.trim() == '') {  setTrOverlayMsg('regFormScreenNameError','Screen name is required!');  regForm.elements["SCREENNAME"].focus();  return false;  }else{  setTrOverlayMsg('regFormScreenNameError','');}}ele = regForm.elements["SUBSCRIBERAGREEMENT"];  if (ele){  if(ele.checked){      ele.value = "on";    }else{      ele.value = "";    }  if(!ele.checked){  setTrOverlayMsg('regFormSubscribeAgreement','You must agree to terms and conditions');return false;}else{  setTrOverlayMsg('regFormSubscribeAgreement','');}}gigyaParams = 'uid='+encodeURIComponent(_tr_gigyaUID) + '&signature='+encodeURIComponent(_tr_gigyaSignature) +     '&timestamp='+encodeURIComponent(_tr_gigyaTimestamp);     gigyaParams += _tr_gigyaUserInfoQueryString;    //if (email == _tr_gigyaEmail){    //gigyaParams = gigyaParams + '&isEmailProvidedBySocial=true';    //}queryString = transformFormToQuery(regForm);url = 'https://' + _tr_commerce_commerceHost + '/commerce/registration/gigyareg?' + gigyaParams + '&' + queryString;   doAjajOperation(url);     }function constructNoScreenName(status, message){var noScreenNameVarArray = new Array();noScreenNameVarArray.push('');noScreenNameVarArray.push('    Please enter a screen name');noScreenNameVarArray.push('          ');   noScreenNameVarArray.push('            ');noScreenNameVarArray.push('            ');noScreenNameVarArray.push('            ');noScreenNameVarArray.push('            ');if(typeof(_tr_commerce_screenname_update_context) != "undefined" &&   _tr_commerce_screenname_update_context != "" &&   _tr_commerce_screenname_update_context != null){noScreenNameVarArray.push('            ');} else {noScreenNameVarArray.push('            ');}noScreenNameVarArray.push('            A screen name is required to use this feature');noScreenNameVarArray.push('            ');    if (message!= null && message != ''){        noScreenNameVarArray.push('    ' + message + '');    }else{        noScreenNameVarArray.push('    ');    }noScreenNameVarArray.push('            ');noScreenNameVarArray.push('            ');noScreenNameVarArray.push('');noScreenNameVarArray.push('   ');noScreenNameVarArray.push('          ');noScreenNameVarArray.push('  ');return noScreenNameVarArray.join('');}function jsUpdateScreenNameSubmit(noScreenNameForm){      screenName = noScreenNameForm.elements["SCREENNAME"].value;   if(screenName == null || screenName == ""){      errorDiv = document.getElementById("ERR-SCREENNAME");      if(errorDiv != null){      errorDiv.innerHTML = 'Please enter a screen name';      errorDiv.style.display="block";                }      return false;   }queryString = transformFormToQuery(noScreenNameForm); url = "https://" + _tr_commerce_commerceHost + "/profile/noScreenName?"+queryString;doAjajOperation(url);}function contructRegEmailVerification(){var tmpArray = new Array();    tmpArray.push('        ');tmpArray.push('            Verify Your Email Address');tmpArray.push('  ');tmpArray.push('    ');tmpArray.push('      ');tmpArray.push('        ');tmpArray.push('          Your account has successfully been created but in order to complete the registration process, you must verify your email address.Check your email and click on the link provided.');tmpArray.push('        ');tmpArray.push('       ');tmpArray.push('    ');tmpArray.push('  ');tmpArray.push('');return tmpArray.join('');}function contructLinkAccountSuccess(){var tmpArray = new Array();tmpArray.push('        ');tmpArray.push('         You have just linked an account to your Reuters account');tmpArray.push(' In the future you can log into your Reuters account directly by using your ' + _tr_gigyaLoginProvider +' account.');tmpArray.push('    ');tmpArray.push('       Manage  ');                    tmpArray.push('       your Profile ');    tmpArray.push('    ');//tmpArray.push('   ');  //tmpArray.push('       Close Window');//tmpArray.push('   ');tmpArray.push('        ');return tmpArray.join('');}function constructForgetPassword(){var tmpArray = new Array();    tmpArray.push('        ');tmpArray.push('            Forgot Your Password?');tmpArray.push('            Enter your email address to reset your password.');tmpArray.push('            ');tmpArray.push('             ');tmpArray.push('  ');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('                 Email Address');tmpArray.push('                 ');tmpArray.push('        ');tmpArray.push('                 ');tmpArray.push('');tmpArray.push('');return tmpArray.join('');}function validateForgetPasswordForm(changePasswordForm){ if(changePasswordForm != null){ emailAddress = changePasswordForm.elements['emailAddress'].value; if(emailAddress == null || emailAddress==''){ alert('Email address is required'); changePasswordForm.elements['emailAddress'].focus(); return false; } else if(!checkEmail(emailAddress)) {alert('Email address is incorrect');changePasswordForm.elements['emailAddress'].focus();return false;} queryString = transformFormToQuery(changePasswordForm); url = "https://" + _tr_commerce_commerceHost + "/login/pages/login/login.do?"+queryString;doAjajOperation(url); }}function promptForgotPasswordErrorMsg(){ enableDisplay('ERRORMSG');}function contructForgotPasswordEmailVerification(userMail){var tmpArray = new Array();tmpArray.push('        ');tmpArray.push('    Email Sent');tmpArray.push('An email has been sent to '+userMail+'. Follow the link in the email to reset your password.');tmpArray.push('        ');return tmpArray.join('');}validateAgreement = function () {promptRegFormAsterisk();           var formEle = document.getElementById("registrationForm");           var errElements = new Array();             var ele = formEle.elements["EMAILADDRESS"];                     if (ele && ele.value.trim() == '') {              var errEle = document.getElementById("ERR-EMAILADDRESS");              if (errEle) {                errEle.innerHTML = "An email address must be entered\r\n";                errElements.push("EMAILADDRESS");                errEle.style.display="block";                              }                      }            var ele = formEle.elements["SCREENNAME"];                     if (ele && ele.value.trim() == '') {              var errEle = document.getElementById("ERR-SCREENNAME");              if (errEle) {                errEle.innerHTML = "A screen name must be entered\r\n";                errElements.push("SCREENNAME");                errEle.style.display="block";                              }                           }            var ele = formEle.elements["POSTALCODE"];                     if (ele && ele.value.trim() == '') {              var errEle = document.getElementById("ERR-POSTALCODE");              if (errEle) {                errEle.innerHTML = "Zip/Postal Code is requried\r\n";                errElements.push("POSTALCODE");                errEle.style.display="block";                              }                           }           var ele = formEle.elements["SUBSCRIBERAGREEMENT"];            if (!ele.checked) {              var errEle = document.getElementById("ERR-SUBSCRIBERAGREEMENT");              if (errEle) {                errEle.innerHTML = "You must agree to the terms and conditions\r\n";                errElements.push("SUBSCRIBERAGREEMENT");                errEle.style.display="block";                              }                          } else {            disableDisplay("ERR-SUBSCRIBERAGREEMENT");            }            var ele = formEle.elements["YEAROFBIRTH"];            if (ele && (ele.value.trim() == '' || ele.value.trim() == '-1')) {              var errEle = document.getElementById("ERR-YEAROFBIRTH");              if (errEle) {                errEle.innerHTML = "Year of Birth is required\r\n";                errElements.push("YEAROFBIRTH");              }            }            var ele = formEle.elements["INVESTINGBACKGROUND"];            if (ele && (ele.value.trim() == '' || ele.value.trim() == '-1')) {              var errEle = document.getElementById("ERR-INVESTINGBACKGROUND");              if (errEle) {                errEle.innerHTML = "Please select an investing background\r\n";                errElements.push("INVESTINGBACKGROUND");              }            }            var ele = formEle.elements["RISKPROFILE"];            if (ele && (ele.value.trim() == '' || ele.value.trim() == '-1')) {              var errEle = document.getElementById("ERR-RISKPROFILE");              if (errEle) {                errEle.innerHTML = "Please select a risk profile\r\n";                errElements.push("RISKPROFILE");              }            }         var ele = formEle.elements["PASSWORD"];          passwdEle = ele;          if(ele && (ele.value.trim() == ''|| ele.value.trim() == '-1')){                        var errEle = document.getElementById("ERR-RE-PASSWORD");               if (errEle) {                errEle.innerHTML = "A password must be entered\r\n";                errElements.push("RE-PASSWORD");              }               repasswdEle = formEle.elements["RE-PASSWORD"];                          }else{            var ele_re = formEle.elements["RE-PASSWORD"];            repasswdEle = ele_re;            if(ele_re && (ele.value.length15)){              var errEle2 = document.getElementById("ERR-RE-PASSWORD");              if(errEle2){                errEle2.innerHTML = "Password length must be between 6 and 15 characters\r\n";                errElements.push("RE-PASSWORD");              }            }else if(ele_re && (ele_re.value.trim() == '' || ele_re.value.trim()=='-1') ){              var errEle2 = document.getElementById("ERR-RE-PASSWORD");              if(errEle2){                errEle2.innerHTML = "Your password must be verified\r\n";                errElements.push("RE-PASSWORD");              }            }else if( ele_re && ele.value != ele_re.value){                            var errEle2 = document.getElementById("ERR-RE-PASSWORD");              if(errEle2){                errEle2.innerHTML = "Your password must match\r\n";                errElements.push("RE-PASSWORD");              }            }           }             if (errElements.length > 0) {                 if(passwdEle){            passwdEle.value = "";    }    if(repasswdEle){            repasswdEle.value = "";    }    for (var i = 0; i ');tmpArray.push('            Register for a Reuters.com Account');tmpArray.push('            ');tmpArray.push('            * Required Field');tmpArray.push('                ');    tmpArray.push('                     ');    tmpArray.push('                    ');    tmpArray.push('                    ');    tmpArray.push('                    ');tmpArray.push('     ');tmpArray.push('  Email Address');tmpArray.push('          *');      tmpArray.push('    ');tmpArray.push('  ');tmpArray.push('    ');tmpArray.push('      ');tmpArray.push('');    tmpArray.push('    Your email address will not be shown anywhere on Reuters.com');    tmpArray.push('');tmpArray.push('          ');tmpArray.push('    ');tmpArray.push('  Password');tmpArray.push('          *');      tmpArray.push('  ');tmpArray.push('      ');tmpArray.push('        '); tmpArray.push('        ');tmpArray.push('            ');tmpArray.push('      ');tmpArray.push('    Confirm Password');tmpArray.push('          *');      tmpArray.push('    ');tmpArray.push('      ');tmpArray.push('        ');tmpArray.push('              ');tmpArray.push('      ');        tmpArray.push('  Screen Name');tmpArray.push('          *');      tmpArray.push('    ');tmpArray.push('  ');tmpArray.push('    ');tmpArray.push('      ');tmpArray.push('');    tmpArray.push('    Your screen name will be displayed next to comments');    tmpArray.push('');tmpArray.push('          ');tmpArray.push('    ');tmpArray.push('');    tmpArray.push('                 Type the letters shown below*');    tmpArray.push('                     ');    tmpArray.push('                 ');        tmpArray.push('                     Try a new set of characters');    tmpArray.push('                 ');    tmpArray.push('                 ');    tmpArray.push('                     ');    tmpArray.push('                     ');    tmpArray.push('                     ');    tmpArray.push('                     ');    tmpArray.push('                 ');tmpArray.push('');tmpArray.push('');tmpArray.push('');tmpArray.push('');      tmpArray.push('      ');var tcDiv = "I agree with the terms and conditions *";tmpArray.push(tcDiv);tmpArray.push('      ');tmpArray.push('    ');      var privacyDiv = "Why is this secure?";tmpArray.push('                 ');tmpArray.push('');tmpArray.push(privacyDiv);tmpArray.push('');tmpArray.push('');tmpArray.push('');return tmpArray.join('');}function showRecaptcha() {Recaptcha.create("6LdshQsAAAAAALmJ2691WNEK-FDvO7ycD9Glr9KA", 'captchadiv', {    theme: 'custom',       lang: 'en',       custom_theme_widget: 'recaptcha_widget',    callback: Recaptcha.focus_response_field    });}function promptRegFormAsterisk(){ enableDisplay('ERR-EMAILADDRESS'); enableDisplay('ERR-SCREENNAME'); enableDisplay('ERR-PASSWORD'); enableDisplay('ERR-RE-PASSWORD'); enableDisplay('ERR-RECAPTCHA'); enableDisplay('ERR-SUBSCRIBERAGREEMENT'); }function disablePromptRegFormAsterisk(){ disableDisplay('ERR-EMAILADDRESS'); disableDisplay('ERR-SCREENNAME'); disableDisplay('ERR-PASSWORD'); disableDisplay('ERR-RE-PASSWORD'); disableDisplay('ERR-RECAPTCHA'); disableDisplay('ERR-SUBSCRIBERAGREEMENT'); }function contructNotifyVerifyEmail(userMail){var tmpArray = new Array();    tmpArray.push('        ');tmpArray.push('            You Must Verify Your Email Address to Continue');tmpArray.push('            Your account has successfully been created but in order to complete the registration process, you must verify your email address. Click on the submit button to receive a new confirmation email.');tmpArray.push('            ');tmpArray.push('             ');tmpArray.push('  ');tmpArray.push('');tmpArray.push('                 ');tmpArray.push('');tmpArray.push('                 Email');tmpArray.push('                 ');tmpArray.push('        ');tmpArray.push('                 ');tmpArray.push('');tmpArray.push('');return tmpArray.join('');}function promptNotifyVerifyErrorMsg(){ enableDisplay('ERRORMSG');}function validateForm(form) {     var formValidationResult;     if (!validateRequired(form)){    alert('Email address is required');    return false;    } else if (!validateEmail(form)) {    alert('Email address is incorrect');    return false;    } queryString = transformFormToQuery(form); url = "https://" + _tr_commerce_commerceHost + "/login/pages/login/login.do?"+queryString;doAjajOperation(url);} function validateRequired(form) {    var isValid = true;email = form.elements['userEmail'].value; if(email == null || email==''){  form.elements['userEmail'].focus(); return false; } return isValid;}function validateEmail(form) { var bValid = true;    var field = form.elements['userEmail'].value    if (!checkEmail(field)) {        bValid = false;    }form.elements['userEmail'].focus();    return bValid;}function contructNotifyVerifyEmailSent(userEmail){var tmpArray = new Array();tmpArray.push('        ');tmpArray.push('    Email Sent');   var promptMsg = "An email has been sent to {0}.Please follow the instructions in the email to complete the log in process.Thank you";tmpArray.push(""+promptMsg.replace("{0}", userEmail)+"");tmpArray.push('        ');return tmpArray.join('');}